(this["webpackJsonpcaiying-schedule"]=this["webpackJsonpcaiying-schedule"]||[]).push([[0],{1637:function(e,t,n){"use strict";n.r(t);var a=n(7),c=n(0),r=n.n(c),i=n(23),u=n.n(i),s=(n(211),n(53)),l=n(48),o=n(42),d=n(1640),j=n(1652),b=n(1642),O=n(1644),f=n(70),h=n(1646),x=n(103),m=n.n(x),v=n(148),p=n(1643),g=n(1648),S=n(1650),y=n(1649),k=n(90),I=n(59),w=n(102),C=n(1639),F=n(1653),N=n(1654),M=n(1655),A=n(1656),E=n(1657),L=n(1645),D=n(1647),T=(n(212),n(149)),B=n.n(T),P=n(174),_=n.n(P);B.a.extend(_.a);var J,R,U=function(){return Array(function(){var e=B()(),t=e.month()+1,n=e.isLeapYear();return 2===t?n?29:28:([1,3,5,7,8,10,12].includes(t),31)}()).fill(0).map((function(e,t){return t+1}))},V=["monday","tuesday","wendsday","thursday","friday","saturday","sunday"].map((function(e){return e[0].toUpperCase()+e.slice(1)})).map((function(e){return e.slice(0,3)+"."})),q=function(e){var t=e.onAddStudent,n=e.onSaveStudent,r=e.student,i=e.isEdit,u=p.a.useForm(),d=Object(o.a)(u,1)[0],j=Object(c.useState)(),b=Object(o.a)(j,2),O=b[0],x=b[1],T=Object(c.useState)([]),B=Object(o.a)(T,2),P=B[0],_=B[1],J=Object(c.useState)([]),R=Object(o.a)(J,2),q=R[0],z=R[1];Object(c.useEffect)((function(){if(r&&i){var e=Object.entries(r).map((function(e){var t=Object(o.a)(e,2);return{name:t[0],value:t[1]}}));d.setFields(e),_(r.unavailables)}}),[r,i]);var G=U(),H=function(){var e=Object(v.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.validateFields();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:n=Object(l.a)(Object(l.a)({},d.getFieldsValue()),{},{unavailables:P}),i&&n.id===r.id&&(n.id=Object(h.a)()),t(n),Y();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.validateFields();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:t=Object(l.a)(Object(l.a)({},d.getFieldsValue()),{},{unavailables:P}),n(t),Y();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){d.resetFields(),_([])};return Object(a.jsxs)(p.a,{form:d,name:"student",layout:"vertical",initialValues:{isManager:!1},children:[Object(a.jsx)(p.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Missing name"}],children:Object(a.jsx)(g.a,{placeholder:"Name of the student"})}),Object(a.jsx)(p.a.Item,{name:"isManager",valuePropName:"checked",label:"Is She or He a Manager?",children:Object(a.jsx)(S.a,{})}),Object(a.jsx)(p.a.Item,{label:"Living Building Number",name:"building",rules:[{required:!0,message:"Missing building"}],children:Object(a.jsx)(y.a,{placeholder:"Living Building Number",min:1,max:20})}),Object(a.jsx)(p.a.Item,{label:"Student ID",name:"id",children:Object(a.jsx)(g.a,{placeholder:"Student ID"})}),Object(a.jsxs)(p.a.Item,{name:"unavailables",label:"Unavailable Date",children:[Object(a.jsxs)(k.a,{children:[Object(a.jsx)(I.a,{span:3,children:Object(a.jsx)(f.a,{type:"dashed",icon:Object(a.jsx)(F.a,{}),onClick:function(){if(Object(L.a)(P,G))return _([]);_(G.slice())}})}),V.map((function(e,t){var n=(t+1)%7;return Object(a.jsx)(I.a,{span:3,onMouseEnter:function(){return x(n)},onMouseLeave:function(){return x(void 0)},onClick:function(){var e=G.filter((function(e){return e%7===n}));if(e.every((function(e){return P.includes(e)})))return _(P.filter((function(t){return!e.includes(t)})));_([].concat(Object(s.a)(P),Object(s.a)(e)))},className:"weekday",children:e},e)}))]}),Object(a.jsx)(w.a.Group,{className:"checkbox-group",value:P,onChange:function(e){_(e)},children:Object(D.a)(7,G).map((function(e,t){return Object(a.jsxs)(k.a,{children:[Object(a.jsx)(f.a,{type:"dashed",icon:Object(a.jsx)(N.a,{}),onMouseEnter:function(){return z([7*t+1,7*t+7])},onMouseLeave:function(){return z([])},onClick:function(){var e=Array(7).fill(0).map((function(e,n){return 7*t+n+1}));if(e.every((function(e){return P.includes(e)})))return _(P.filter((function(t){return!e.includes(t)})));_(P.concat(e))}}),e.map((function(e){var t=q,n=Object(o.a)(t,2),c=n[0],r=n[1],i=e%7===O||c<=e&&e<=r;return Object(a.jsx)(I.a,{span:3,children:Object(a.jsx)(w.a,{className:"checkbox-column ".concat(i?"hover":""),value:e,children:e})},e)}))]},"week-row-".concat(t))}))})]}),Object(a.jsx)(C.a,{}),i&&Object(a.jsx)(p.a.Item,{children:Object(a.jsx)(f.a,{type:"primary",block:!0,icon:Object(a.jsx)(M.a,{}),onClick:W,children:"Save Changes"})}),Object(a.jsx)(p.a.Item,{children:Object(a.jsx)(f.a,{type:"primary",block:!0,icon:Object(a.jsx)(A.a,{}),onClick:H,children:i?"Duplicate Student":"Add Student"})}),Object(a.jsx)(p.a.Item,{children:Object(a.jsx)(f.a,{type:"default",block:!0,htmlType:"button",icon:Object(a.jsx)(E.a,{}),onClick:Y,children:"Reset Form"})})]})},z=n(1651),G=n(1641),H=n(1658),W=n(1659),Y=U(),K=[{name:"c",id:"2",building:2,unavailables:[2,3]}],Q=function(e){var t=e.students,n=void 0===t?K:t,c=function(e){var t=e.onSelectStudent,n=e.onRemoveStudent;return[{title:"\u59d3\u540d",dataIndex:"name",key:"name"},{title:"ID",dataIndex:"id",key:"id"},{title:"Workdays",dataIndex:"unavailables",key:"unavailables",render:function(e,t){return Object(a.jsx)(a.Fragment,{children:Y.map((function(t){var n=e.includes(t)?"yellow":"blue";return Object(a.jsx)(z.a,{color:n,children:t},t)}))})}},{title:"Action",key:"action",render:function(e,c){return Object(a.jsxs)(j.b,{children:[Object(a.jsx)(f.a,{type:"ghost",icon:Object(a.jsx)(H.a,{}),onClick:function(){return t(c)},children:"Edit"}),Object(a.jsx)(f.a,{type:"ghost",icon:Object(a.jsx)(W.a,{}),onClick:function(){return n(c.id)},danger:!0,children:"Remove"})]})}}]}(e);return Object(a.jsx)(G.a,{title:function(){return Object(a.jsx)(O.a.Title,{children:"Student List"})},columns:c,dataSource:n,size:"small"})},X="__STUDENT_LIST__",Z=(n(356),n(112)),$=n(110),ee=n.n($),te=function(e){return[{title:"Date",dataIndex:"date",fixed:"left",width:40}].concat(Object(s.a)(e.map((function(e){return{title:"Building ".concat(e),dataIndex:"building_".concat(e),width:80,render:function(e){var t=e,n=Object(o.a)(t,2),c=n[0],r=n[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(O.a.Paragraph,{children:c}),Object(a.jsx)(O.a.Paragraph,{children:r})]})}}}))))},ne=Object(s.a)(Array(9)).map((function(e,t){return t+1})),ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(Math.random()*(e-t))+t},ce=function(e){for(var t=e.slice(),n=e.length,a=0;a<n;a++){var c=ae(a);c!==a&&(t[a]=t[c]),t[c]=e[a]}return t},re=(J=16,Object(s.a)(Array(J))).map((function(){return ee.a.name.firstName()})),ie=function(){return ce(ne).slice(0).map((function(e){return Object(Z.a)({},"building_".concat(e),ce(re).slice(0,2))})).reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),t)}),{})},ue=U().map((function(e){return Object(l.a)({date:e},ie())})),se=function(e){var t=e.data,n=void 0===t?ue:t,c=e.buildings,r=void 0===c?ne:c;return Object(a.jsx)(G.a,{title:function(){return Object(a.jsx)(O.a.Title,{children:"Students Schedule with fake data"})},columns:te(r),dataSource:n,scroll:{x:1280,y:800},size:"small"})},le=d.a.Content,oe=d.a.Sider,de=d.a.Header,je=JSON.parse(null!==(R=window.localStorage.getItem(X))&&void 0!==R?R:"[]");var be,Oe=function(){var e=Object(c.useState)(je),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(!1),u=Object(o.a)(i,2),x=u[0],m=u[1],v=Object(c.useState)(),p=Object(o.a)(v,2),g=p[0],S=p[1],y=Object(c.useState)(!1),k=Object(o.a)(y,2);return k[0],k[1],Object(c.useEffect)((function(){return localStorage.setItem(X,JSON.stringify(n))}),[n]),Object(a.jsxs)(d.a,{className:"App",children:[Object(a.jsx)(oe,{width:"338",children:Object(a.jsxs)(j.b,{direction:"vertical",children:[Object(a.jsxs)(b.a,{children:[Object(a.jsx)(O.a.Title,{level:5,children:"Incoming Building List... :>"}),Object(a.jsx)(O.a.Paragraph,{children:"Developing... Wait for me"})]}),Object(a.jsx)(b.a,{children:Object(a.jsx)(q,{onAddStudent:function(e){var t,a=Object(l.a)(Object(l.a)({},e),{},{id:null!==(t=e.id)&&void 0!==t?t:Object(h.a)()});r([].concat(Object(s.a)(n),[a])),m(!1)},onSaveStudent:function(e){var t=n.indexOf(g);r([].concat(Object(s.a)(n.slice(0,t)),[e],Object(s.a)(n.slice(t+1))))},isEdit:x,student:g})})]})}),Object(a.jsxs)(le,{children:[Object(a.jsx)(de,{className:"caiying-header",children:Object(a.jsxs)(j.b,{children:[Object(a.jsx)(f.a,{type:"primary",children:"Auto Fill Blank"}),Object(a.jsx)(f.a,{type:"ghost",children:"Import Data"}),Object(a.jsx)(f.a,{type:"default",children:"Export To Excel"}),Object(a.jsx)(f.a,{type:"text",children:"Give It a Like"}),Object(a.jsx)(f.a,{type:"link",children:"Say hello to Amagi"})]})}),Object(a.jsx)(Q,{students:n,onSelectStudent:function(e){S(Object(l.a)({},e)),m(!0)},onRemoveStudent:function(e){r(n.filter((function(t){return t.id!==e})))}}),Object(a.jsx)(se,{})]})]})},fe=JSON.parse(null!==(be=window.localStorage.getItem(X))&&void 0!==be?be:"[]"),he=Object(c.createContext)({}),xe=function(e){var t=e.children,n=Object(c.useState)(!1),r=Object(o.a)(n,2),i=r[0],u=(r[1],Object(c.useState)(fe)),d=Object(o.a)(u,2),j=d[0],b=d[1],O=Object(c.useState)(),f=Object(o.a)(O,2),x=f[0];f[1];return Object(a.jsx)(he.Provider,{value:{students:fe,addStudent:function(e){b([].concat(Object(s.a)(j),[Object(l.a)({id:Object(h.a)()},e)]))},editStudent:function(){},removeStudent:function(){},editing:i,selectedStudent:x},children:t})},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1660)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};u.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(xe,{children:Object(a.jsx)(Oe,{})})}),document.getElementById("root")),me()},211:function(e,t,n){},212:function(e,t,n){},356:function(e,t,n){}},[[1637,1,2]]]);
//# sourceMappingURL=main.08e49ed3.chunk.js.map